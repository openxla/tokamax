name: Run Benchmarks

on:
  # Allow manual runs from the Actions tab for testing
  workflow_dispatch:

  schedule:
    - cron: "0 0 * * *"  # Runs at 00:00 UTC every day

permissions:
  contents: read
  pull-requests: write

jobs:
  run_benchmarks:
    name: Run Tokamax benchmarks
    uses: google-ml-infra/actions/.github/workflows/run-benchmarks.yaml@34dfd0eeb034f93329ae87d953bc51940ce1c908
    with:
      registry_file: "tokamax/benchmarks/benchmark_registry.pbtxt"
      ml_actions_ref: "34dfd0eeb034f93329ae87d953bc51940ce1c908"
      publish_metrics: true
      pub_sub_gcp_project_id: "ml-oss-benchmarking-production"
      pub_sub_gcp_topic_id: "public-results-prod"
